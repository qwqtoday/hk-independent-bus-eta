import{m as F,I as G,J as $,q as l,r as v,L as O,aX as je,p as V,X as Ae,z as Ee,j as n,h as I,l as H,O as Se,aY as te,f as E,aZ as re,a_ as Le,a$ as Me,F as pe,a3 as fe,a4 as me,a8 as ze,a9 as S,Z as ge,a5 as Ne,al as De,b0 as Ie}from"./index-3ZrRw547.js";import{o as ke,q as be,s as se,P as Be,t as _e,w as We,x as qe,y as Ue,z as Fe}from"./App-BbGSVcmn.js";import{C as Ge}from"./CircularProgress-Rq-XzyyU.js";function Oe(e){return F("MuiCollapse",e)}G("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Ve=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],He=e=>{const{orientation:t,classes:r}=e,o={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return H(o,Oe,r)},Xe=$("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.state==="entered"&&t.entered,r.state==="exited"&&!r.in&&r.collapsedSize==="0px"&&t.hidden]}})(({theme:e,ownerState:t})=>l({height:0,overflow:"hidden",transition:e.transitions.create("height")},t.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},t.state==="entered"&&l({height:"auto",overflow:"visible"},t.orientation==="horizontal"&&{width:"auto"}),t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&{visibility:"hidden"})),Je=$("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>l({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),Ke=$("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>l({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),he=v.forwardRef(function(t,r){const o=O({props:t,name:"MuiCollapse"}),{addEndListener:d,children:p,className:u,collapsedSize:c="0px",component:s,easing:h,in:f,onEnter:m,onEntered:g,onEntering:C,onExit:x,onExited:i,onExiting:b,orientation:y="vertical",style:P,timeout:w=je.standard,TransitionComponent:B=ke}=o,Z=V(o,Ve),M=l({},o,{orientation:y,collapsedSize:c}),T=He(M),_=be(),Y=Ae(),j=v.useRef(null),W=v.useRef(),z=typeof c=="number"?`${c}px`:c,L=y==="horizontal",q=L?"width":"height",X=v.useRef(null),ve=Ee(r,X),N=a=>R=>{if(a){const A=X.current;R===void 0?a(A):a(A,R)}},Q=()=>j.current?j.current[L?"clientWidth":"clientHeight"]:0,Ce=N((a,R)=>{j.current&&L&&(j.current.style.position="absolute"),a.style[q]=z,m&&m(a,R)}),ye=N((a,R)=>{const A=Q();j.current&&L&&(j.current.style.position="");const{duration:U,easing:J}=se({style:P,timeout:w,easing:h},{mode:"enter"});if(w==="auto"){const ne=_.transitions.getAutoHeightDuration(A);a.style.transitionDuration=`${ne}ms`,W.current=ne}else a.style.transitionDuration=typeof U=="string"?U:`${U}ms`;a.style[q]=`${A}px`,a.style.transitionTimingFunction=J,C&&C(a,R)}),Re=N((a,R)=>{a.style[q]="auto",g&&g(a,R)}),$e=N(a=>{a.style[q]=`${Q()}px`,x&&x(a)}),Pe=N(i),we=N(a=>{const R=Q(),{duration:A,easing:U}=se({style:P,timeout:w,easing:h},{mode:"exit"});if(w==="auto"){const J=_.transitions.getAutoHeightDuration(R);a.style.transitionDuration=`${J}ms`,W.current=J}else a.style.transitionDuration=typeof A=="string"?A:`${A}ms`;a.style[q]=z,a.style.transitionTimingFunction=U,b&&b(a)}),Te=a=>{w==="auto"&&Y.start(W.current||0,a),d&&d(X.current,a)};return n.jsx(B,l({in:f,onEnter:Ce,onEntered:Re,onEntering:ye,onExit:$e,onExited:Pe,onExiting:we,addEndListener:Te,nodeRef:X,timeout:w==="auto"?null:w},Z,{children:(a,R)=>n.jsx(Xe,l({as:s,className:I(T.root,u,{entered:T.entered,exited:!f&&z==="0px"&&T.hidden}[a]),style:l({[L?"minWidth":"minHeight"]:z},P),ref:ve},R,{ownerState:l({},M,{state:a}),children:n.jsx(Je,{ownerState:l({},M,{state:a}),className:T.wrapper,ref:j,children:n.jsx(Ke,{ownerState:l({},M,{state:a}),className:T.wrapperInner,children:p})})}))}))});he.muiSupportAuto=!0;const Ze=he,xe=v.createContext({});function Ye(e){return F("MuiAccordion",e)}const Qe=G("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),K=Qe,et=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],tt=e=>{const{classes:t,square:r,expanded:o,disabled:d,disableGutters:p}=e;return H({root:["root",!r&&"rounded",o&&"expanded",d&&"disabled",!p&&"gutters"],region:["region"]},Ye,t)},rt=$(Be,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${K.region}`]:t.region},t.root,!r.square&&t.rounded,!r.disableGutters&&t.gutters]}})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${K.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${K.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e,ownerState:t})=>l({},!t.square&&{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},!t.disableGutters&&{[`&.${K.expanded}`]:{margin:"16px 0"}})),ot=v.forwardRef(function(t,r){const o=O({props:t,name:"MuiAccordion"}),{children:d,className:p,defaultExpanded:u=!1,disabled:c=!1,disableGutters:s=!1,expanded:h,onChange:f,square:m=!1,slots:g={},slotProps:C={},TransitionComponent:x,TransitionProps:i}=o,b=V(o,et),[y,P]=_e({controlled:h,default:u,name:"Accordion",state:"expanded"}),w=v.useCallback(L=>{P(!y),f&&f(L,!y)},[y,f,P]),[B,...Z]=v.Children.toArray(d),M=v.useMemo(()=>({expanded:y,disabled:c,disableGutters:s,toggle:w}),[y,c,s,w]),T=l({},o,{square:m,disabled:c,disableGutters:s,expanded:y}),_=tt(T),Y=l({transition:x},g),j=l({transition:i},C),[W,z]=We("transition",{elementType:Ze,externalForwardedProps:{slots:Y,slotProps:j},ownerState:T});return n.jsxs(rt,l({className:I(_.root,p),ref:r,ownerState:T,square:m},b,{children:[n.jsx(xe.Provider,{value:M,children:B}),n.jsx(W,l({in:y,timeout:"auto"},z,{children:n.jsx("div",{"aria-labelledby":B.props.id,id:B.props["aria-controls"],role:"region",className:_.region,children:Z})}))]}))}),It=ot;function nt(e){return F("MuiAccordionDetails",e)}G("MuiAccordionDetails",["root"]);const st=["className"],at=e=>{const{classes:t}=e;return H({root:["root"]},nt,t)},it=$("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),lt=v.forwardRef(function(t,r){const o=O({props:t,name:"MuiAccordionDetails"}),{className:d}=o,p=V(o,st),u=o,c=at(u);return n.jsx(it,l({className:I(c.root,d),ref:r,ownerState:u},p))}),kt=lt;function ct(e){return F("MuiAccordionSummary",e)}const dt=G("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),D=dt,ut=["children","className","expandIcon","focusVisibleClassName","onClick"],pt=e=>{const{classes:t,expanded:r,disabled:o,disableGutters:d}=e;return H({root:["root",r&&"expanded",o&&"disabled",!d&&"gutters"],focusVisible:["focusVisible"],content:["content",r&&"expanded",!d&&"contentGutters"],expandIconWrapper:["expandIconWrapper",r&&"expanded"]},ct,t)},ft=$(Se,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{const r={duration:e.transitions.duration.shortest};return l({display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],r),[`&.${D.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${D.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${D.disabled})`]:{cursor:"pointer"}},!t.disableGutters&&{[`&.${D.expanded}`]:{minHeight:64}})}),mt=$("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e,ownerState:t})=>l({display:"flex",flexGrow:1,margin:"12px 0"},!t.disableGutters&&{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${D.expanded}`]:{margin:"20px 0"}})),gt=$("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${D.expanded}`]:{transform:"rotate(180deg)"}})),bt=v.forwardRef(function(t,r){const o=O({props:t,name:"MuiAccordionSummary"}),{children:d,className:p,expandIcon:u,focusVisibleClassName:c,onClick:s}=o,h=V(o,ut),{disabled:f=!1,disableGutters:m,expanded:g,toggle:C}=v.useContext(xe),x=y=>{C&&C(y),s&&s(y)},i=l({},o,{expanded:g,disabled:f,disableGutters:m}),b=pt(i);return n.jsxs(ft,l({focusRipple:!1,disableRipple:!0,disabled:f,component:"div","aria-expanded":g,className:I(b.root,p),focusVisibleClassName:I(b.focusVisible,c),onClick:x,ref:r,ownerState:i},h,{children:[n.jsx(mt,{className:b.content,ownerState:i,children:d}),u&&n.jsx(gt,{className:b.expandIconWrapper,ownerState:i,children:u})]}))}),Bt=bt;function ht(e){return F("MuiLinearProgress",e)}G("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const xt=["className","color","value","valueBuffer","variant"];let k=e=>e,ae,ie,le,ce,de,ue;const ee=4,vt=te(ae||(ae=k`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),Ct=te(ie||(ie=k`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),yt=te(le||(le=k`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),Rt=e=>{const{classes:t,variant:r,color:o}=e,d={root:["root",`color${E(o)}`,r],dashed:["dashed",`dashedColor${E(o)}`],bar1:["bar",`barColor${E(o)}`,(r==="indeterminate"||r==="query")&&"bar1Indeterminate",r==="determinate"&&"bar1Determinate",r==="buffer"&&"bar1Buffer"],bar2:["bar",r!=="buffer"&&`barColor${E(o)}`,r==="buffer"&&`color${E(o)}`,(r==="indeterminate"||r==="query")&&"bar2Indeterminate",r==="buffer"&&"bar2Buffer"]};return H(d,ht,t)},oe=(e,t)=>t==="inherit"?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?Le(e.palette[t].main,.62):Me(e.palette[t].main,.5),$t=$("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`color${E(r.color)}`],t[r.variant]]}})(({ownerState:e,theme:t})=>l({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:oe(t,e.color)},e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},e.variant==="buffer"&&{backgroundColor:"transparent"},e.variant==="query"&&{transform:"rotate(180deg)"})),Pt=$("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.dashed,t[`dashedColor${E(r.color)}`]]}})(({ownerState:e,theme:t})=>{const r=oe(t,e.color);return l({position:"absolute",marginTop:0,height:"100%",width:"100%"},e.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},re(ce||(ce=k`
    animation: ${0} 3s infinite linear;
  `),yt)),wt=$("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t[`barColor${E(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar1Indeterminate,r.variant==="determinate"&&t.bar1Determinate,r.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>l({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.variant==="determinate"&&{transition:`transform .${ee}s linear`},e.variant==="buffer"&&{zIndex:1,transition:`transform .${ee}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&re(de||(de=k`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),vt)),Tt=$("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t[`barColor${E(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar2Indeterminate,r.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>l({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.color==="inherit"&&{opacity:.3},e.variant==="buffer"&&{backgroundColor:oe(t,e.color),transition:`transform .${ee}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&re(ue||(ue=k`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),Ct)),jt=v.forwardRef(function(t,r){const o=O({props:t,name:"MuiLinearProgress"}),{className:d,color:p="primary",value:u,valueBuffer:c,variant:s="indeterminate"}=o,h=V(o,xt),f=l({},o,{color:p,variant:s}),m=Rt(f),g=be(),C={},x={bar1:{},bar2:{}};if((s==="determinate"||s==="buffer")&&u!==void 0){C["aria-valuenow"]=Math.round(u),C["aria-valuemin"]=0,C["aria-valuemax"]=100;let i=u-100;g.direction==="rtl"&&(i=-i),x.bar1.transform=`translateX(${i}%)`}if(s==="buffer"&&c!==void 0){let i=(c||0)-100;g.direction==="rtl"&&(i=-i),x.bar2.transform=`translateX(${i}%)`}return n.jsxs($t,l({className:I(m.root,d),ownerState:f,role:"progressbar"},C,{ref:r},h,{children:[s==="buffer"?n.jsx(Pt,{className:m.dashed,ownerState:f}):null,n.jsx(wt,{className:m.bar1,ownerState:f,style:x.bar1}),s==="determinate"?null:n.jsx(Tt,{className:m.bar2,ownerState:f,style:x.bar2})]}))}),At=jt,Et=pe.forwardRef(({sx:e,color:t,...r},o)=>n.jsx(At,{color:t??"inherit",sx:{m:1,height:5,borderRadius:5,...e},ref:o,...r})),_t=pe.forwardRef(({sx:e,color:t,...r},o)=>n.jsx(Ge,{color:t??"inherit",sx:{m:1,...e},ref:o,...r})),Wt=({routeId:e,seq:t,containerSx:r,showStopName:o=!1})=>{const{t:d}=fe(),p=me(),{db:{routeList:u,stopList:c}}=v.useContext(ze),s=qe(`${e}/${t}`),{route:h,co:f,stops:m}=u[e],g=Object.values(m)[0][t],C=v.useMemo(()=>Object.values(u[e].stops).map(i=>c[i[i.length-1]].name).concat(u[e].dest),[u,e,c]),x=v.useMemo(()=>{let i=!1;return f[0]==="mtr"?i=m.mtr.indexOf(g)+1>=m.mtr.length:f.includes("lightRail")&&(i=m.lightRail.indexOf(g)+1>=m.lightRail.length),s===null?null:i&&s.length===0?d("終點站"):s.length>0&&s.every(b=>!b.eta)&&s[0].remark[p]?s[0].remark[p]:s.length===0||s.every(b=>!b.eta)?d("未有班次資料"):null},[s,f,m,g,d,p]);return s==null?n.jsx(S,{sx:r,children:n.jsx(Et,{})}):n.jsxs(S,{sx:r,children:[o&&n.jsx(ge,{variant:"caption",children:c[g].name[p]}),x,s.length>0&&s.every(i=>i.eta)&&s.map((i,b)=>n.jsx(St,{eta:i,routeDests:C,showCompany:f.length>1,route:h},`route-${b}`))]})},St=({eta:{eta:e,remark:t,co:r,dest:o},routeDests:d,showCompany:p,route:u})=>{const{t:c}=fe(),s=me(),{etaFormat:h,platformMode:f}=v.useContext(Ne),m=v.useMemo(()=>{if(r==="mtr")return!0;for(const P of d)if(P.en.toLowerCase()===o.en.toLowerCase()||P.zh===o.zh)return!1;return!0},[d,o,r]),g=Math.round((new Date(e).getTime()-new Date().getTime())/60/1e3),C=n.jsx(S,{component:"span",sx:h!=="exact"?{fontSize:"0.9em"}:{},children:e.slice(11,16)}),x=r==="mtr"||r==="lightRail";let i,b;x&&g<=1?(i=g===1?`${c("即將抵達")} `:`${c("正在離開")} `,b=!0):(i=g<1?" - ":`${g} `,b=!1);const y=n.jsxs(S,{component:"span",children:[n.jsx(S,{component:"span",sx:{...Mt,color:P=>P.palette.warning.main},fontSize:b?"0.9em":void 0,children:i}),!b&&n.jsx(S,{component:"span",sx:{fontSize:"0.8em"},children:c("分鐘")})]});return n.jsxs(ge,{variant:"subtitle1",sx:{justifyContent:"center"},children:[h==="diff"&&y,h==="exact"&&C,h==="mixed"&&n.jsxs(n.Fragment,{children:[C," ",y]}),!x&&n.jsx(n.Fragment,{children:" - "}),n.jsxs(S,{component:"span",sx:{fontSize:"0.8em",textOverflow:"ellipsis"},children:[p&&n.jsxs(n.Fragment,{children:[" ",c(r)]})," ",n.jsx(Lt,{remark:t,co:r,language:s,route:u,platformMode:f}),x&&" ",!x&&n.jsx(n.Fragment,{children:" "}),m&&o[s]]})]})},Lt=({remark:e,language:t,co:r,route:o,platformMode:d})=>{var h;if(e===null)return"";const p=[...((h=e.en)==null?void 0:h.matchAll(/Platform (\d+)/g))??[]][0]||[];let u="";p.length===2&&p[1].length&&(u=De(Number(p[1]),d));const c=(/Platform [\d+] - (▭+)/gm.exec((e==null?void 0:e.en)??"")??[])[1]??"";return r==="mtr"||r==="lightRail"?n.jsxs(n.Fragment,{children:[n.jsx(S,{component:"span",color:Ie([r],o,!0),children:u})," ",c.length===1&&n.jsx(Ue,{}),c.length===2&&n.jsx(Fe,{})]}):e[t]},Mt={fontWeight:"700",color:"#088bce"};export{It as A,_t as C,Et as L,Wt as T,Bt as a,kt as b};
